# Avito_Web_Service
Ad count service

Данный репозиторий содержит в себе файлы и папку, необходимые для запуска проекта тестового задания с помощью Docker.
В корне репозитория содержатся файлы исходного кода, а также файлы Dockerfile и docker-compose.yml, необходимые для создания контейнера.
В папке data содержится пустой файл json_db.json, который во время работы программы хранит в себе записи.

Сама программа является веб-сервисом, реализованным на Flask и Celery с использованием Redis. Сам сервер доступен на localhost, т.е. http://127.0.0.1:5000/.
Точка входа в программу - файл main_program.py.

Согласно заданию, были реализованы следующие методы:

/add - принимает поисковую фразу и регион, регистрирует их в системе. Возвращает id этой пары.
Введите 1 для Москвы, 2 для Москвы и МО, 3 для МО, 4 для России.
Пример формата ввода - /add/диван/1/

/stat - принимает на вход id запроса и интервал, за который нужно вывести счётчики.
Возвращает счётчики и соответствующие им временные метки (timestamp).
Пример формата ввода - /stat/i9fdgj38gdmv5/2020-01-31 14:55/2020-02-31 14:55

/json_db - Вывести БД в формате JSON.

Также при помощи Celery было реализовано асинхронное автообновление базы данных записей о количестве объявлений раз в час (каждый час суток, т.е. 00:00, 01:00, 02:00 и т.д.).

Проект запускается через команду docker-compose up (или docker-compose up --build).
